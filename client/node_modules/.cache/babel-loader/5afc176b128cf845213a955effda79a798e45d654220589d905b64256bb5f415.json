{"ast":null,"code":"/*!\n * wavesurfer.js spectrogram plugin 6.6.3 (2023-04-04)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"WaveSurfer\", [], t) : \"object\" == typeof exports ? exports.WaveSurfer = t() : (e.WaveSurfer = e.WaveSurfer || {}, e.WaveSurfer.spectrogram = t());\n}(self, () => (() => {\n  \"use strict\";\n\n  var e = {\n      325: (e, t) => {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.default = function (e, t, r, a) {\n          switch (this.bufferSize = e, this.sampleRate = t, this.bandwidth = 2 / e * (t / 2), this.sinTable = new Float32Array(e), this.cosTable = new Float32Array(e), this.windowValues = new Float32Array(e), this.reverseTable = new Uint32Array(e), this.peakBand = 0, this.peak = 0, r) {\n            case \"bartlett\":\n              for (i = 0; i < e; i++) this.windowValues[i] = 2 / (e - 1) * ((e - 1) / 2 - Math.abs(i - (e - 1) / 2));\n              break;\n            case \"bartlettHann\":\n              for (i = 0; i < e; i++) this.windowValues[i] = .62 - .48 * Math.abs(i / (e - 1) - .5) - .38 * Math.cos(2 * Math.PI * i / (e - 1));\n              break;\n            case \"blackman\":\n              for (a = a || .16, i = 0; i < e; i++) this.windowValues[i] = (1 - a) / 2 - .5 * Math.cos(2 * Math.PI * i / (e - 1)) + a / 2 * Math.cos(4 * Math.PI * i / (e - 1));\n              break;\n            case \"cosine\":\n              for (i = 0; i < e; i++) this.windowValues[i] = Math.cos(Math.PI * i / (e - 1) - Math.PI / 2);\n              break;\n            case \"gauss\":\n              for (a = a || .25, i = 0; i < e; i++) this.windowValues[i] = Math.pow(Math.E, -.5 * Math.pow((i - (e - 1) / 2) / (a * (e - 1) / 2), 2));\n              break;\n            case \"hamming\":\n              for (i = 0; i < e; i++) this.windowValues[i] = .54 - .46 * Math.cos(2 * Math.PI * i / (e - 1));\n              break;\n            case \"hann\":\n            case void 0:\n              for (i = 0; i < e; i++) this.windowValues[i] = .5 * (1 - Math.cos(2 * Math.PI * i / (e - 1)));\n              break;\n            case \"lanczoz\":\n              for (i = 0; i < e; i++) this.windowValues[i] = Math.sin(Math.PI * (2 * i / (e - 1) - 1)) / (Math.PI * (2 * i / (e - 1) - 1));\n              break;\n            case \"rectangular\":\n              for (i = 0; i < e; i++) this.windowValues[i] = 1;\n              break;\n            case \"triangular\":\n              for (i = 0; i < e; i++) this.windowValues[i] = 2 / e * (e / 2 - Math.abs(i - (e - 1) / 2));\n              break;\n            default:\n              throw Error(\"No such window function '\" + r + \"'\");\n          }\n          var i,\n            n = 1,\n            s = e >> 1;\n          for (; n < e;) {\n            for (i = 0; i < n; i++) this.reverseTable[i + n] = this.reverseTable[i] + s;\n            n <<= 1, s >>= 1;\n          }\n          for (i = 0; i < e; i++) this.sinTable[i] = Math.sin(-Math.PI / i), this.cosTable[i] = Math.cos(-Math.PI / i);\n          this.calculateSpectrum = function (e) {\n            var t,\n              r,\n              a,\n              i = this.bufferSize,\n              n = this.cosTable,\n              s = this.sinTable,\n              o = this.reverseTable,\n              l = new Float32Array(i),\n              h = new Float32Array(i),\n              f = 2 / this.bufferSize,\n              c = Math.sqrt,\n              u = new Float32Array(i / 2),\n              p = Math.floor(Math.log(i) / Math.LN2);\n            if (Math.pow(2, p) !== i) throw \"Invalid buffer size, must be a power of 2.\";\n            if (i !== e.length) throw \"Supplied buffer is not the same size as defined FFT. FFT Size: \" + i + \" Buffer Size: \" + e.length;\n            for (var d, v, w, y, m, b, M, g, S = 1, k = 0; k < i; k++) l[k] = e[o[k]] * this.windowValues[o[k]], h[k] = 0;\n            for (; S < i;) {\n              d = n[S], v = s[S], w = 1, y = 0;\n              for (var x = 0; x < S; x++) {\n                for (k = x; k < i;) b = w * l[m = k + S] - y * h[m], M = w * h[m] + y * l[m], l[m] = l[k] - b, h[m] = h[k] - M, l[k] += b, h[k] += M, k += S << 1;\n                w = (g = w) * d - y * v, y = g * v + y * d;\n              }\n              S <<= 1;\n            }\n            k = 0;\n            for (var C = i / 2; k < C; k++) (a = f * c((t = l[k]) * t + (r = h[k]) * r)) > this.peak && (this.peakBand = k, this.peak = a), u[k] = a;\n            return u;\n          };\n        }, e.exports = t.default;\n      },\n      943: (e, t, r) => {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.default = void 0;\n        var a,\n          i = (a = r(325)) && a.__esModule ? a : {\n            default: a\n          };\n        function n(e) {\n          return n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n            return typeof e;\n          } : function (e) {\n            return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n          }, n(e);\n        }\n        function s(e, t) {\n          for (var r = 0; r < t.length; r++) {\n            var a = t[r];\n            a.enumerable = a.enumerable || !1, a.configurable = !0, \"value\" in a && (a.writable = !0), Object.defineProperty(e, (i = a.key, s = void 0, s = function (e, t) {\n              if (\"object\" !== n(e) || null === e) return e;\n              var r = e[Symbol.toPrimitive];\n              if (void 0 !== r) {\n                var a = r.call(e, t || \"default\");\n                if (\"object\" !== n(a)) return a;\n                throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n              }\n              return (\"string\" === t ? String : Number)(e);\n            }(i, \"string\"), \"symbol\" === n(s) ? s : String(s)), a);\n          }\n          var i, s;\n        }\n        var o = function () {\n          function e(t, r) {\n            var a = this;\n            !function (e, t) {\n              if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n            }(this, e), this.params = t, this.wavesurfer = r, this.util = r.util, this.frequenciesDataUrl = t.frequenciesDataUrl, this._onScroll = function (e) {\n              a.updateScroll(e);\n            }, this._onRender = function () {\n              a.render();\n            }, this._onWrapperClick = function (e) {\n              a._wrapperClickHandler(e);\n            }, this._onReady = function () {\n              var e = a.drawer = r.drawer;\n              if (a.container = \"string\" == typeof t.container ? document.querySelector(t.container) : t.container, !a.container) throw Error(\"No container for WaveSurfer spectrogram\");\n              if (t.colorMap) {\n                if (t.colorMap.length < 256) throw new Error(\"Colormap must contain 256 elements\");\n                for (var i = 0; i < t.colorMap.length; i++) {\n                  if (4 !== t.colorMap[i].length) throw new Error(\"ColorMap entries must contain 4 values\");\n                }\n                a.colorMap = t.colorMap;\n              } else {\n                a.colorMap = [];\n                for (var n = 0; n < 256; n++) {\n                  var s = (255 - n) / 256;\n                  a.colorMap.push([s, s, s, 1]);\n                }\n              }\n              a.width = e.width, a.pixelRatio = a.params.pixelRatio || r.params.pixelRatio, a.fftSamples = a.params.fftSamples || r.params.fftSamples || 512, a.height = a.params.height || a.fftSamples / 2, a.noverlap = t.noverlap, a.windowFunc = t.windowFunc, a.alpha = t.alpha, a.splitChannels = t.splitChannels, a.channels = a.splitChannels ? r.backend.buffer.numberOfChannels : 1, a.frequencyMin = t.frequencyMin || 0, a.frequencyMax = t.frequencyMax || 12e3, a.createWrapper(), a.createCanvas(), a.render(), e.wrapper.addEventListener(\"scroll\", a._onScroll), r.on(\"redraw\", a._onRender);\n            };\n          }\n          var t, r, a;\n          return t = e, a = [{\n            key: \"create\",\n            value: function (t) {\n              return {\n                name: \"spectrogram\",\n                deferInit: !(!t || !t.deferInit) && t.deferInit,\n                params: t,\n                staticProps: {\n                  FFT: i.default\n                },\n                instance: e\n              };\n            }\n          }], (r = [{\n            key: \"init\",\n            value: function () {\n              this.wavesurfer.isReady ? this._onReady() : this.wavesurfer.once(\"ready\", this._onReady);\n            }\n          }, {\n            key: \"destroy\",\n            value: function () {\n              this.unAll(), this.wavesurfer.un(\"ready\", this._onReady), this.wavesurfer.un(\"redraw\", this._onRender), this.drawer && this.drawer.wrapper.removeEventListener(\"scroll\", this._onScroll), this.wavesurfer = null, this.util = null, this.params = null, this.wrapper && (this.wrapper.removeEventListener(\"click\", this._onWrapperClick), this.wrapper.parentNode.removeChild(this.wrapper), this.wrapper = null);\n            }\n          }, {\n            key: \"createWrapper\",\n            value: function () {\n              var e = this.container.querySelector(\"spectrogram\");\n              e && this.container.removeChild(e);\n              var t = this.wavesurfer.params;\n              if (this.wrapper = document.createElement(\"spectrogram\"), this.params.labels) {\n                var r = this.labelsEl = document.createElement(\"canvas\");\n                r.classList.add(\"spec-labels\"), this.drawer.style(r, {\n                  position: \"absolute\",\n                  zIndex: 9,\n                  height: \"\".concat(this.height * this.channels, \"px\"),\n                  width: \"55px\"\n                }), this.wrapper.appendChild(r), this.loadLabels(\"rgba(68,68,68,0.5)\", \"12px\", \"10px\", \"\", \"#fff\", \"#f7f7f7\", \"center\", \"#specLabels\");\n              }\n              this.drawer.style(this.wrapper, {\n                display: \"block\",\n                position: \"relative\",\n                userSelect: \"none\",\n                webkitUserSelect: \"none\",\n                height: \"\".concat(this.height * this.channels, \"px\")\n              }), (t.fillParent || t.scrollParent) && this.drawer.style(this.wrapper, {\n                width: \"100%\",\n                overflowX: \"hidden\",\n                overflowY: \"hidden\"\n              }), this.container.appendChild(this.wrapper), this.wrapper.addEventListener(\"click\", this._onWrapperClick);\n            }\n          }, {\n            key: \"_wrapperClickHandler\",\n            value: function (e) {\n              e.preventDefault();\n              var t = \"offsetX\" in e ? e.offsetX : e.layerX;\n              this.fireEvent(\"click\", t / this.width || 0);\n            }\n          }, {\n            key: \"createCanvas\",\n            value: function () {\n              var e = this.canvas = this.wrapper.appendChild(document.createElement(\"canvas\"));\n              this.spectrCc = e.getContext(\"2d\"), this.util.style(e, {\n                position: \"absolute\",\n                zIndex: 4\n              });\n            }\n          }, {\n            key: \"render\",\n            value: function () {\n              this.updateCanvasStyle(), this.frequenciesDataUrl ? this.loadFrequenciesData(this.frequenciesDataUrl) : this.getFrequencies(this.drawSpectrogram);\n            }\n          }, {\n            key: \"updateCanvasStyle\",\n            value: function () {\n              var e = Math.round(this.width / this.pixelRatio) + \"px\";\n              this.canvas.width = this.width, this.canvas.height = this.fftSamples / 2 * this.channels, this.canvas.style.width = e, this.canvas.style.height = this.height + \"px\";\n            }\n          }, {\n            key: \"drawSpectrogram\",\n            value: function (e, t) {\n              isNaN(e[0][0]) || (e = [e]);\n              var r = t.spectrCc,\n                a = t.fftSamples / 2,\n                i = t.width,\n                n = t.buffer.sampleRate / 2,\n                s = t.frequencyMin,\n                o = t.frequencyMax;\n              if (r) for (var l = function (l) {\n                  for (var h = t.resample(e[l]), f = new ImageData(i, a), c = 0; c < h.length; c++) for (var u = 0; u < h[c].length; u++) {\n                    var p = t.colorMap[h[c][u]],\n                      d = 4 * ((a - u) * i + c);\n                    f.data[d] = 255 * p[0], f.data[d + 1] = 255 * p[1], f.data[d + 2] = 255 * p[2], f.data[d + 3] = 255 * p[3];\n                  }\n                  createImageBitmap(f).then(function (e) {\n                    return r.drawImage(e, 0, a * (1 - o / n), i, a * (o - s) / n, 0, a * l, i, a);\n                  });\n                }, h = 0; h < e.length; h++) l(h);\n            }\n          }, {\n            key: \"getFrequencies\",\n            value: function (e) {\n              var t = this.fftSamples,\n                r = this.buffer = this.wavesurfer.backend.buffer,\n                a = this.channels;\n              if (r) {\n                var n = r.sampleRate,\n                  s = [],\n                  o = this.noverlap;\n                if (!o) {\n                  var l = r.length / this.canvas.width;\n                  o = Math.max(0, Math.round(t - l));\n                }\n                for (var h = new i.default(t, n, this.windowFunc, this.alpha), f = 0; f < a; f++) {\n                  for (var c = r.getChannelData(f), u = [], p = 0; p + t < c.length;) {\n                    var d = c.slice(p, p + t),\n                      v = h.calculateSpectrum(d),\n                      w = new Uint8Array(t / 2),\n                      y = void 0;\n                    for (y = 0; y < t / 2; y++) w[y] = Math.max(-255, 45 * Math.log10(v[y]));\n                    u.push(w), p += t - o;\n                  }\n                  s.push(u);\n                }\n                e(s, this);\n              } else this.fireEvent(\"error\", \"Web Audio buffer is not available\");\n            }\n          }, {\n            key: \"loadFrequenciesData\",\n            value: function (e) {\n              var t = this,\n                r = this.util.fetchFile({\n                  url: e\n                });\n              return r.on(\"success\", function (e) {\n                return t.drawSpectrogram(JSON.parse(e), t);\n              }), r.on(\"error\", function (e) {\n                return t.fireEvent(\"error\", e);\n              }), r;\n            }\n          }, {\n            key: \"freqType\",\n            value: function (e) {\n              return e >= 1e3 ? (e / 1e3).toFixed(1) : Math.round(e);\n            }\n          }, {\n            key: \"unitType\",\n            value: function (e) {\n              return e >= 1e3 ? \"KHz\" : \"Hz\";\n            }\n          }, {\n            key: \"loadLabels\",\n            value: function (e, t, r, a, i, n, s, o) {\n              e = e || \"rgba(68,68,68,0)\", t = t || \"12px\", r = r || \"10px\", a = a || \"Helvetica\", i = i || \"#fff\", n = n || \"#fff\", s = s || \"center\", o = o || \"#specLabels\";\n              var l = this.height || 512,\n                h = l / 256 * 5,\n                f = this.frequencyMin,\n                c = (this.frequencyMax - f) / h,\n                u = this.labelsEl.getContext(\"2d\"),\n                p = window.devicePixelRatio;\n              if (this.labelsEl.height = this.height * this.channels * p, this.labelsEl.width = 55 * p, u.scale(p, p), u) for (var d = 0; d < this.channels; d++) {\n                u.fillStyle = e, u.fillRect(0, d * l, 55, (1 + d) * l), u.fill();\n                var v = void 0;\n                for (v = 0; v <= h; v++) {\n                  u.textAlign = s, u.textBaseline = \"middle\";\n                  var w = f + c * v,\n                    y = this.freqType(w),\n                    m = this.unitType(w),\n                    b = void 0;\n                  0 == v ? (b = (1 + d) * l + v - 10, u.fillStyle = n, u.font = r + \" \" + a, u.fillText(m, 40, b), u.fillStyle = i, u.font = t + \" \" + a, u.fillText(y, 16, b)) : (b = (1 + d) * l - 50 * v + 2, u.fillStyle = n, u.font = r + \" \" + a, u.fillText(m, 40, b), u.fillStyle = i, u.font = t + \" \" + a, u.fillText(y, 16, b));\n                }\n              }\n            }\n          }, {\n            key: \"updateScroll\",\n            value: function (e) {\n              this.wrapper && (this.wrapper.scrollLeft = e.target.scrollLeft);\n            }\n          }, {\n            key: \"resample\",\n            value: function (e) {\n              var t,\n                r = this.width,\n                a = [],\n                i = 1 / e.length,\n                n = 1 / r;\n              for (t = 0; t < r; t++) {\n                var s = new Array(e[0].length),\n                  o = void 0;\n                for (o = 0; o < e.length; o++) {\n                  var l = o * i,\n                    h = l + i,\n                    f = t * n,\n                    c = f + n,\n                    u = h <= f || c <= l ? 0 : Math.min(Math.max(h, f), Math.max(c, l)) - Math.max(Math.min(h, f), Math.min(c, l)),\n                    p = void 0;\n                  if (u > 0) for (p = 0; p < e[0].length; p++) null == s[p] && (s[p] = 0), s[p] += u / n * e[o][p];\n                }\n                var d = new Uint8Array(e[0].length),\n                  v = void 0;\n                for (v = 0; v < e[0].length; v++) d[v] = s[v];\n                a.push(d);\n              }\n              return a;\n            }\n          }]) && s(t.prototype, r), a && s(t, a), Object.defineProperty(t, \"prototype\", {\n            writable: !1\n          }), e;\n        }();\n        t.default = o, e.exports = t.default;\n      }\n    },\n    t = {};\n  var r = function r(a) {\n    var i = t[a];\n    if (void 0 !== i) return i.exports;\n    var n = t[a] = {\n      exports: {}\n    };\n    return e[a](n, n.exports, r), n.exports;\n  }(943);\n  return r;\n})());","map":{"version":3,"names":["e","t","exports","module","define","amd","WaveSurfer","spectrogram","self","r","a","bufferSize","sampleRate","bandwidth","sinTable","Float32Array","cosTable","windowValues","reverseTable","Uint32Array","peakBand","peak","i","Math","abs","cos","PI","pow","E","sin","Error","n","s","calculateSpectrum","o","l","h","f","c","sqrt","u","p","floor","log","LN2","length","d","v","w","y","m","b","M","g","S","k","x","C","default","__esModule","Symbol","iterator","constructor","prototype","enumerable","configurable","writable","Object","defineProperty","key","toPrimitive","call","TypeError","String","Number","params","wavesurfer","util","frequenciesDataUrl","_onScroll","updateScroll","_onRender","render","_onWrapperClick","_wrapperClickHandler","_onReady","drawer","container","document","querySelector","colorMap","push","width","pixelRatio","fftSamples","height","noverlap","windowFunc","alpha","splitChannels","channels","backend","buffer","numberOfChannels","frequencyMin","frequencyMax","createWrapper","createCanvas","wrapper","addEventListener","on","value","name","deferInit","staticProps","FFT","instance","isReady","once","unAll","un","removeEventListener","parentNode","removeChild","createElement","labels","labelsEl","classList","add","style","position","zIndex","concat","appendChild","loadLabels","display","userSelect","webkitUserSelect","fillParent","scrollParent","overflowX","overflowY","preventDefault","offsetX","layerX","fireEvent","canvas","spectrCc","getContext","updateCanvasStyle","loadFrequenciesData","getFrequencies","drawSpectrogram","round","isNaN","_loop","resample","ImageData","data","createImageBitmap","then","drawImage","max","getChannelData","slice","Uint8Array","log10","fetchFile","url","JSON","parse","toFixed","window","devicePixelRatio","scale","fillStyle","fillRect","fill","textAlign","textBaseline","freqType","unitType","font","fillText","scrollLeft","target","Array","min"],"sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/src/plugin/spectrogram/fft.js","webpack://WaveSurfer/src/plugin/spectrogram/index.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"spectrogram\"] = factory();\n})(self, () => {\nreturn ","/* eslint-disable complexity, no-redeclare, no-var, one-var */\n\n/**\n * Calculate FFT - Based on https://github.com/corbanbrook/dsp.js\n *\n * @param {Number} bufferSize Buffer size\n * @param {Number} sampleRate Sample rate\n * @param {Function} windowFunc Window function\n * @param {Number} alpha Alpha channel\n */\nexport default function FFT(bufferSize, sampleRate, windowFunc, alpha) {\n    this.bufferSize = bufferSize;\n    this.sampleRate = sampleRate;\n    this.bandwidth = (2 / bufferSize) * (sampleRate / 2);\n\n    this.sinTable = new Float32Array(bufferSize);\n    this.cosTable = new Float32Array(bufferSize);\n    this.windowValues = new Float32Array(bufferSize);\n    this.reverseTable = new Uint32Array(bufferSize);\n\n    this.peakBand = 0;\n    this.peak = 0;\n\n    var i;\n    switch (windowFunc) {\n        case 'bartlett':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / (bufferSize - 1)) *\n                    ((bufferSize - 1) / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        case 'bartlettHann':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.62 -\n                    0.48 * Math.abs(i / (bufferSize - 1) - 0.5) -\n                    0.38 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'blackman':\n            alpha = alpha || 0.16;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (1 - alpha) / 2 -\n                    0.5 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1)) +\n                    (alpha / 2) *\n                        Math.cos((4 * Math.PI * i) / (bufferSize - 1));\n            }\n            break;\n        case 'cosine':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.cos(\n                    (Math.PI * i) / (bufferSize - 1) - Math.PI / 2\n                );\n            }\n            break;\n        case 'gauss':\n            alpha = alpha || 0.25;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.pow(\n                    Math.E,\n                    -0.5 *\n                        Math.pow(\n                            (i - (bufferSize - 1) / 2) /\n                                ((alpha * (bufferSize - 1)) / 2),\n                            2\n                        )\n                );\n            }\n            break;\n        case 'hamming':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.54 -\n                    0.46 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'hann':\n        case undefined:\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.5 * (1 - Math.cos((Math.PI * 2 * i) / (bufferSize - 1)));\n            }\n            break;\n        case 'lanczoz':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    Math.sin(Math.PI * ((2 * i) / (bufferSize - 1) - 1)) /\n                    (Math.PI * ((2 * i) / (bufferSize - 1) - 1));\n            }\n            break;\n        case 'rectangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = 1;\n            }\n            break;\n        case 'triangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / bufferSize) *\n                    (bufferSize / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        default:\n            throw Error(\"No such window function '\" + windowFunc + \"'\");\n    }\n\n    var limit = 1;\n    var bit = bufferSize >> 1;\n    var i;\n\n    while (limit < bufferSize) {\n        for (i = 0; i < limit; i++) {\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n        }\n\n        limit = limit << 1;\n        bit = bit >> 1;\n    }\n\n    for (i = 0; i < bufferSize; i++) {\n        this.sinTable[i] = Math.sin(-Math.PI / i);\n        this.cosTable[i] = Math.cos(-Math.PI / i);\n    }\n\n    this.calculateSpectrum = function(buffer) {\n        // Locally scope variables for speed up\n        var bufferSize = this.bufferSize,\n            cosTable = this.cosTable,\n            sinTable = this.sinTable,\n            reverseTable = this.reverseTable,\n            real = new Float32Array(bufferSize),\n            imag = new Float32Array(bufferSize),\n            bSi = 2 / this.bufferSize,\n            sqrt = Math.sqrt,\n            rval,\n            ival,\n            mag,\n            spectrum = new Float32Array(bufferSize / 2);\n\n        var k = Math.floor(Math.log(bufferSize) / Math.LN2);\n\n        if (Math.pow(2, k) !== bufferSize) {\n            throw 'Invalid buffer size, must be a power of 2.';\n        }\n        if (bufferSize !== buffer.length) {\n            throw 'Supplied buffer is not the same size as defined FFT. FFT Size: ' +\n                bufferSize +\n                ' Buffer Size: ' +\n                buffer.length;\n        }\n\n        var halfSize = 1,\n            phaseShiftStepReal,\n            phaseShiftStepImag,\n            currentPhaseShiftReal,\n            currentPhaseShiftImag,\n            off,\n            tr,\n            ti,\n            tmpReal;\n\n        for (var i = 0; i < bufferSize; i++) {\n            real[i] =\n                buffer[reverseTable[i]] * this.windowValues[reverseTable[i]];\n            imag[i] = 0;\n        }\n\n        while (halfSize < bufferSize) {\n            phaseShiftStepReal = cosTable[halfSize];\n            phaseShiftStepImag = sinTable[halfSize];\n\n            currentPhaseShiftReal = 1;\n            currentPhaseShiftImag = 0;\n\n            for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n                var i = fftStep;\n\n                while (i < bufferSize) {\n                    off = i + halfSize;\n                    tr =\n                        currentPhaseShiftReal * real[off] -\n                        currentPhaseShiftImag * imag[off];\n                    ti =\n                        currentPhaseShiftReal * imag[off] +\n                        currentPhaseShiftImag * real[off];\n\n                    real[off] = real[i] - tr;\n                    imag[off] = imag[i] - ti;\n                    real[i] += tr;\n                    imag[i] += ti;\n\n                    i += halfSize << 1;\n                }\n\n                tmpReal = currentPhaseShiftReal;\n                currentPhaseShiftReal =\n                    tmpReal * phaseShiftStepReal -\n                    currentPhaseShiftImag * phaseShiftStepImag;\n                currentPhaseShiftImag =\n                    tmpReal * phaseShiftStepImag +\n                    currentPhaseShiftImag * phaseShiftStepReal;\n            }\n\n            halfSize = halfSize << 1;\n        }\n\n        for (var i = 0, N = bufferSize / 2; i < N; i++) {\n            rval = real[i];\n            ival = imag[i];\n            mag = bSi * sqrt(rval * rval + ival * ival);\n\n            if (mag > this.peak) {\n                this.peakBand = i;\n                this.peak = mag;\n            }\n            spectrum[i] = mag;\n        }\n        return spectrum;\n    };\n}\n","/* eslint-enable complexity, no-redeclare, no-var, one-var */\n\nimport FFT from './fft';\n\n/**\n * @typedef {Object} SpectrogramPluginParams\n * @property {string|HTMLElement} container Selector of element or element in\n * which to render\n * @property {number} fftSamples=512 Number of samples to fetch to FFT. Must be\n * a power of 2.\n * @property {boolean} splitChannels=false Render with separate spectrograms for\n * the channels of the audio\n * @property {number} height=fftSamples/2 Height of the spectrogram view in CSS\n * pixels\n * @property {boolean} labels Set to true to display frequency labels.\n * @property {number} noverlap Size of the overlapping window. Must be <\n * fftSamples. Auto deduced from canvas size by default.\n * @property {string} windowFunc='hann' The window function to be used. One of\n * these: `'bartlett'`, `'bartlettHann'`, `'blackman'`, `'cosine'`, `'gauss'`,\n * `'hamming'`, `'hann'`, `'lanczoz'`, `'rectangular'`, `'triangular'`\n * @property {?number} alpha Some window functions have this extra value.\n * (Between 0 and 1)\n * @property {number} pixelRatio=wavesurfer.params.pixelRatio to control the\n * size of the spectrogram in relation with its canvas. 1 = Draw on the whole\n * canvas. 2 = Draw on a quarter (1/2 the length and 1/2 the width)\n * @property {number} frequencyMin=0 Min frequency to scale spectrogram.\n * @property {number} frequencyMax=12000 Max frequency to scale spectrogram.\n * Set this to samplerate/2 to draw whole range of spectrogram.\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('spectrogram')`\n * @property {?number[][]} colorMap A 256 long array of 4-element arrays.\n * Each entry should contain a float between 0 and 1 and specify\n * r, g, b, and alpha.\n */\n\n/**\n * Render a spectrogram visualisation of the audio.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import SpectrogramPlugin from 'wavesurfer.spectrogram.js';\n *\n * // commonjs\n * var SpectrogramPlugin = require('wavesurfer.spectrogram.js');\n *\n * // if you are using <script> tags\n * var SpectrogramPlugin = window.WaveSurfer.spectrogram;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     SpectrogramPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class SpectrogramPlugin {\n    /**\n     * Spectrogram plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {SpectrogramPluginParams} params Parameters used to initialise the plugin\n     * @return {PluginDefinition} An object representing the plugin.\n     */\n    static create(params) {\n        return {\n            name: 'spectrogram',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                FFT: FFT\n            },\n            instance: SpectrogramPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n\n        this.frequenciesDataUrl = params.frequenciesDataUrl;\n        this._onScroll = e => {\n            this.updateScroll(e);\n        };\n        this._onRender = () => {\n            this.render();\n        };\n        this._onWrapperClick = e => {\n            this._wrapperClickHandler(e);\n        };\n        this._onReady = () => {\n            const drawer = (this.drawer = ws.drawer);\n\n            this.container =\n                'string' == typeof params.container\n                    ? document.querySelector(params.container)\n                    : params.container;\n\n            if (!this.container) {\n                throw Error('No container for WaveSurfer spectrogram');\n            }\n            if (params.colorMap) {\n                if (params.colorMap.length < 256) {\n                    throw new Error('Colormap must contain 256 elements');\n                }\n                for (let i = 0; i < params.colorMap.length; i++) {\n                    const cmEntry = params.colorMap[i];\n                    if (cmEntry.length !== 4) {\n                        throw new Error(\n                            'ColorMap entries must contain 4 values'\n                        );\n                    }\n                }\n                this.colorMap = params.colorMap;\n            } else {\n                this.colorMap = [];\n                for (let i = 0; i < 256; i++) {\n                    const val = (255 - i) / 256;\n                    this.colorMap.push([val, val, val, 1]);\n                }\n            }\n            this.width = drawer.width;\n            this.pixelRatio = this.params.pixelRatio || ws.params.pixelRatio;\n            this.fftSamples =\n                this.params.fftSamples || ws.params.fftSamples || 512;\n            this.height = this.params.height || this.fftSamples / 2;\n            this.noverlap = params.noverlap;\n            this.windowFunc = params.windowFunc;\n            this.alpha = params.alpha;\n            this.splitChannels = params.splitChannels;\n            this.channels = this.splitChannels ? ws.backend.buffer.numberOfChannels : 1;\n\n            // Getting file's original samplerate is difficult(#1248).\n            // So set 12kHz default to render like wavesurfer.js 5.x.\n            this.frequencyMin = params.frequencyMin || 0;\n            this.frequencyMax = params.frequencyMax || 12000;\n\n            this.createWrapper();\n            this.createCanvas();\n            this.render();\n\n            drawer.wrapper.addEventListener('scroll', this._onScroll);\n            ws.on('redraw', this._onRender);\n        };\n    }\n\n    init() {\n        // Check if wavesurfer is ready\n        if (this.wavesurfer.isReady) {\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n        }\n    }\n\n    destroy() {\n        this.unAll();\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('redraw', this._onRender);\n        this.drawer && this.drawer.wrapper.removeEventListener('scroll', this._onScroll);\n        this.wavesurfer = null;\n        this.util = null;\n        this.params = null;\n        if (this.wrapper) {\n            this.wrapper.removeEventListener('click', this._onWrapperClick);\n            this.wrapper.parentNode.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    }\n\n    createWrapper() {\n        const prevSpectrogram = this.container.querySelector('spectrogram');\n        if (prevSpectrogram) {\n            this.container.removeChild(prevSpectrogram);\n        }\n        const wsParams = this.wavesurfer.params;\n        this.wrapper = document.createElement('spectrogram');\n        // if labels are active\n        if (this.params.labels) {\n            const labelsEl = (this.labelsEl = document.createElement('canvas'));\n            labelsEl.classList.add('spec-labels');\n            this.drawer.style(labelsEl, {\n                position: 'absolute',\n                zIndex: 9,\n                height: `${this.height * this.channels}px`,\n                width: `55px`\n            });\n            this.wrapper.appendChild(labelsEl);\n            this.loadLabels(\n                'rgba(68,68,68,0.5)',\n                '12px',\n                '10px',\n                '',\n                '#fff',\n                '#f7f7f7',\n                'center',\n                '#specLabels'\n            );\n        }\n\n        this.drawer.style(this.wrapper, {\n            display: 'block',\n            position: 'relative',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            height: `${this.height * this.channels}px`\n        });\n\n        if (wsParams.fillParent || wsParams.scrollParent) {\n            this.drawer.style(this.wrapper, {\n                width: '100%',\n                overflowX: 'hidden',\n                overflowY: 'hidden'\n            });\n        }\n        this.container.appendChild(this.wrapper);\n\n        this.wrapper.addEventListener('click', this._onWrapperClick);\n    }\n\n    _wrapperClickHandler(event) {\n        event.preventDefault();\n        const relX = 'offsetX' in event ? event.offsetX : event.layerX;\n        this.fireEvent('click', relX / this.width || 0);\n    }\n\n    createCanvas() {\n        const canvas = (this.canvas = this.wrapper.appendChild(\n            document.createElement('canvas')\n        ));\n\n        this.spectrCc = canvas.getContext('2d');\n\n        this.util.style(canvas, {\n            position: 'absolute',\n            zIndex: 4\n        });\n    }\n\n    render() {\n        this.updateCanvasStyle();\n\n        if (this.frequenciesDataUrl) {\n            this.loadFrequenciesData(this.frequenciesDataUrl);\n        } else {\n            this.getFrequencies(this.drawSpectrogram);\n        }\n    }\n\n    updateCanvasStyle() {\n        const width = Math.round(this.width / this.pixelRatio) + 'px';\n        this.canvas.width = this.width;\n        this.canvas.height = this.fftSamples / 2 * this.channels;\n        this.canvas.style.width = width;\n        this.canvas.style.height = this.height + 'px';\n    }\n\n    drawSpectrogram(frequenciesData, my) {\n        if (!isNaN(frequenciesData[0][0])) { // data is 1ch [sample, freq] format\n            // to [channel, sample, freq] format\n            frequenciesData = [frequenciesData];\n        }\n\n        const spectrCc = my.spectrCc;\n        const height = my.fftSamples / 2;\n        const width = my.width;\n        const freqFrom = my.buffer.sampleRate / 2;\n        const freqMin = my.frequencyMin;\n        const freqMax = my.frequencyMax;\n\n        if (!spectrCc) {\n            return;\n        }\n\n        for (let c = 0; c < frequenciesData.length; c++) { // for each channel\n            const pixels = my.resample(frequenciesData[c]);\n            const imageData = new ImageData(width, height);\n\n            for (let i = 0; i < pixels.length; i++) {\n                for (let j = 0; j < pixels[i].length; j++) {\n                    const colorMap = my.colorMap[pixels[i][j]];\n                    const redIndex = ((height - j) * width + i) * 4;\n                    imageData.data[redIndex] = colorMap[0] * 255;\n                    imageData.data[redIndex + 1] = colorMap[1] * 255;\n                    imageData.data[redIndex + 2] = colorMap[2] * 255;\n                    imageData.data[redIndex + 3] = colorMap[3] * 255;\n                }\n            }\n\n            // scale and stack spectrograms\n            createImageBitmap(imageData).then(renderer =>\n                spectrCc.drawImage(renderer,\n                    0, height * (1 - freqMax / freqFrom), // source x, y\n                    width, height * (freqMax - freqMin) / freqFrom, // source width, height\n                    0, height * c, // destination x, y\n                    width, height // destination width, height\n                )\n            );\n        }\n    }\n\n    getFrequencies(callback) {\n        const fftSamples = this.fftSamples;\n        const buffer = (this.buffer = this.wavesurfer.backend.buffer);\n        const channels = this.channels;\n\n        if (!buffer) {\n            this.fireEvent('error', 'Web Audio buffer is not available');\n            return;\n        }\n\n        // This may differ from file samplerate. Browser resamples audio.\n        const sampleRate = buffer.sampleRate;\n        const frequencies = [];\n\n        let noverlap = this.noverlap;\n        if (!noverlap) {\n            const uniqueSamplesPerPx = buffer.length / this.canvas.width;\n            noverlap = Math.max(0, Math.round(fftSamples - uniqueSamplesPerPx));\n        }\n\n        const fft = new FFT(\n            fftSamples,\n            sampleRate,\n            this.windowFunc,\n            this.alpha\n        );\n\n        for (let c = 0; c < channels; c++) { // for each channel\n            const channelData = buffer.getChannelData(c);\n            const channelFreq = [];\n            let currentOffset = 0;\n\n            while (currentOffset + fftSamples < channelData.length) {\n                const segment = channelData.slice(\n                    currentOffset,\n                    currentOffset + fftSamples\n                );\n                const spectrum = fft.calculateSpectrum(segment);\n                const array = new Uint8Array(fftSamples / 2);\n                let j;\n                for (j = 0; j < fftSamples / 2; j++) {\n                    array[j] = Math.max(-255, Math.log10(spectrum[j]) * 45);\n                }\n                channelFreq.push(array);\n                // channelFreq: [sample, freq]\n\n                currentOffset += fftSamples - noverlap;\n            }\n            frequencies.push(channelFreq);\n            // frequencies: [channel, sample, freq]\n        }\n        callback(frequencies, this);\n    }\n\n    loadFrequenciesData(url) {\n        const request = this.util.fetchFile({ url: url });\n\n        request.on('success', data =>\n            this.drawSpectrogram(JSON.parse(data), this)\n        );\n        request.on('error', e => this.fireEvent('error', e));\n\n        return request;\n    }\n\n    freqType(freq) {\n        return freq >= 1000 ? (freq / 1000).toFixed(1) : Math.round(freq);\n    }\n\n    unitType(freq) {\n        return freq >= 1000 ? 'KHz' : 'Hz';\n    }\n\n    loadLabels(\n        bgFill,\n        fontSizeFreq,\n        fontSizeUnit,\n        fontType,\n        textColorFreq,\n        textColorUnit,\n        textAlign,\n        container\n    ) {\n        const frequenciesHeight = this.height;\n        bgFill = bgFill || 'rgba(68,68,68,0)';\n        fontSizeFreq = fontSizeFreq || '12px';\n        fontSizeUnit = fontSizeUnit || '10px';\n        fontType = fontType || 'Helvetica';\n        textColorFreq = textColorFreq || '#fff';\n        textColorUnit = textColorUnit || '#fff';\n        textAlign = textAlign || 'center';\n        container = container || '#specLabels';\n        const bgWidth = 55;\n        const getMaxY = frequenciesHeight || 512;\n        const labelIndex = 5 * (getMaxY / 256);\n        const freqStart = this.frequencyMin;\n        const step = (this.frequencyMax - freqStart) / labelIndex;\n\n        // prepare canvas element for labels\n        const ctx = this.labelsEl.getContext('2d');\n        const dispScale = window.devicePixelRatio;\n        this.labelsEl.height = this.height * this.channels * dispScale;\n        this.labelsEl.width = bgWidth * dispScale;\n        ctx.scale(dispScale, dispScale);\n\n        if (!ctx) {\n            return;\n        }\n\n        for (let c = 0; c < this.channels; c++) { // for each channel\n            // fill background\n            ctx.fillStyle = bgFill;\n            ctx.fillRect(0, c * getMaxY, bgWidth, (1 + c) * getMaxY);\n            ctx.fill();\n            let i;\n\n            // render labels\n            for (i = 0; i <= labelIndex; i++) {\n                ctx.textAlign = textAlign;\n                ctx.textBaseline = 'middle';\n\n                const freq = freqStart + step * i;\n                const label = this.freqType(freq);\n                const units = this.unitType(freq);\n                const yLabelOffset = 2;\n                const x = 16;\n                let y;\n\n                if (i == 0) {\n                    y = (1 + c) * getMaxY + i - 10;\n                    // unit label\n                    ctx.fillStyle = textColorUnit;\n                    ctx.font = fontSizeUnit + ' ' + fontType;\n                    ctx.fillText(units, x + 24, y);\n                    // freq label\n                    ctx.fillStyle = textColorFreq;\n                    ctx.font = fontSizeFreq + ' ' + fontType;\n                    ctx.fillText(label, x, y);\n                } else {\n                    y = (1 + c) * getMaxY - i * 50 + yLabelOffset;\n                    // unit label\n                    ctx.fillStyle = textColorUnit;\n                    ctx.font = fontSizeUnit + ' ' + fontType;\n                    ctx.fillText(units, x + 24, y);\n                    // freq label\n                    ctx.fillStyle = textColorFreq;\n                    ctx.font = fontSizeFreq + ' ' + fontType;\n                    ctx.fillText(label, x, y);\n                }\n            }\n        }\n    }\n\n    updateScroll(e) {\n        if (this.wrapper) {\n            this.wrapper.scrollLeft = e.target.scrollLeft;\n        }\n    }\n\n    resample(oldMatrix) {\n        const columnsNumber = this.width;\n        const newMatrix = [];\n\n        const oldPiece = 1 / oldMatrix.length;\n        const newPiece = 1 / columnsNumber;\n        let i;\n\n        for (i = 0; i < columnsNumber; i++) {\n            const column = new Array(oldMatrix[0].length);\n            let j;\n\n            for (j = 0; j < oldMatrix.length; j++) {\n                const oldStart = j * oldPiece;\n                const oldEnd = oldStart + oldPiece;\n                const newStart = i * newPiece;\n                const newEnd = newStart + newPiece;\n\n                const overlap =\n                    oldEnd <= newStart || newEnd <= oldStart\n                        ? 0\n                        : Math.min(\n                            Math.max(oldEnd, newStart),\n                            Math.max(newEnd, oldStart)\n                        ) -\n                        Math.max(\n                            Math.min(oldEnd, newStart),\n                            Math.min(newEnd, oldStart)\n                        );\n                let k;\n                /* eslint-disable max-depth */\n                if (overlap > 0) {\n                    for (k = 0; k < oldMatrix[0].length; k++) {\n                        if (column[k] == null) {\n                            column[k] = 0;\n                        }\n                        column[k] += (overlap / newPiece) * oldMatrix[j][k];\n                    }\n                }\n                /* eslint-enable max-depth */\n            }\n\n            const intColumn = new Uint8Array(oldMatrix[0].length);\n            let m;\n\n            for (m = 0; m < oldMatrix[0].length; m++) {\n                intColumn[m] = column[m];\n            }\n\n            newMatrix.push(intColumn);\n        }\n\n        return newMatrix;\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(943);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}